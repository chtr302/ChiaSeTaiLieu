<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head('Studucu - Categories')"></head>
<body class="documents-page page-categories">
  <div th:replace="fragments/navbar :: navbar(sinhVien=${sinhVien})"></div>
  <main class="main">
    <section class="documents-section">
      <div class="documents-container">
        <!-- Sidebar -->
        <div th:replace="~{fragments/sidebar :: sidebar(${sinhVien}, 'categories')}"></div>
        
        <!-- Main Content -->
        <div class="main-content">
          <div class="content-header categories-header">
            <!-- Header with title and filter -->
            <div class="header-container">
              <h2 class="page-title">All Categories</h2>
              <!-- Filter Section -->
              <div class="filter-section">
                <div class="filter-group">
                  <label for="sort-filter">Sort By:</label>
                  <select id="sort-filter" class="filter-select">
                    <option value="documents" th:selected="${selectedSort == 'documents'}">Most Documents</option>
                    <option value="documents-asc" th:selected="${selectedSort == 'documents-asc'}">Fewest Documents</option>
                    <option value="latest" th:selected="${selectedSort == 'latest'}">Latest Documents</option>
                    <option value="oldest" th:selected="${selectedSort == 'oldest'}">Oldest Documents</option>
                    <option value="name" th:selected="${selectedSort == 'name'}">Name A-Z</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          
          <!-- Content Container -->
          <div class="content-container-categories">
            <div class="categories-grid-full">
              <div th:each="category : ${loaiTaiLieu}" class="category-item" th:data-category-id="${category.maLoai}">
                <div class="category-content">
                  <div class="category-icon">
                    <i class="fas fa-folder"></i>
                  </div>
                  <h3 class="category-name" th:text="${category.tenLoai}">Category Name</h3>
                  <p class="category-doc-count" th:text="${categoryDocumentCounts[category.tenLoai]} + ' documents'">0 documents</p>
                  <a th:href="@{'/documents/category/' + ${category.maLoai}}" class="category-link">View Documents</a>
                </div>
              </div>
              
              <!-- Empty state -->
              <div th:if="${#lists.isEmpty(loaiTaiLieu)}" class="empty-state">
                <div class="empty-icon">
                  <i class="fas fa-folder"></i>
                </div>
                <h3 class="empty-title">No categories found</h3>
                <p class="empty-message">There are no document categories available yet.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <div th:replace="fragments/scripts :: scripts"></div>
  <link th:href="@{/css/documents.css}" rel="stylesheet">
  <link th:href="@{/css/recents-history.css}" rel="stylesheet">
  <script th:src="@{/js/document.js}"></script>
  <script th:src="@{/js/recents-history.js}"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Apply filter on select change (auto-apply)
      const sortSelect = document.getElementById('sort-filter');
      if (sortSelect) {
        sortSelect.addEventListener('change', function() {
          const sortFilter = this.value;
          
          let newUrl = '/documents/categories';
          if (sortFilter && sortFilter !== 'documents') {
            newUrl += `?sort=${encodeURIComponent(sortFilter)}`;
          }
          
          window.location.href = newUrl;
        });
      }
    });
  </script>
</body>
</html> 